<!-- Custom Projects Layout -->
<div class="projects">
  {% assign projects = site.data.projects %}

  {% for project in projects %}
    <div class="project-item" data-aos="fade-up">
      <div class="row align-items-center mb-4">

        <!-- Project Image -->
        <div class="col-md-3 col-sm-4 text-center">
          <div class="project-image-container">
            <img src="{{ project.image | relative_url }}"
                 alt="{{ project.title }}"
                 class="project-image img-fluid rounded shadow-sm"
                 data-bs-toggle="modal"
                 data-bs-target="#projectImageModal{{ forloop.index }}"
                 style="cursor: pointer; max-height: 150px; object-fit: cover;">
          </div>
        </div>

        <!-- Project Details -->
        <div class="col-md-9 col-sm-8">
          <div class="project-content">

            <!-- Title -->
            <h5 class="project-title mb-2">{{ project.title }}</h5>

            <!-- Authors -->
            <div class="project-authors mb-2">
              {% assign equal_contrib_authors = "" %}
              {% for author in project.authors %}
                {% if author.equal_contrib %}
                  {% assign equal_contrib_authors = equal_contrib_authors | append: author.name | append: ", " %}
                {% endif %}
              {% endfor %}

              {% for author in project.authors %}
                {% if author.name %}
                  {% assign author_name = author.name %}
                {% else %}
                  {% assign author_name = author %}
                {% endif %}

                <span class="author {% if author_name == project.highlight_author %}highlight-author{% endif %}">{{ author_name }}{% if author.equal_contrib %}<sup class="equal-contrib">*</sup>{% endif %}</span>{% unless forloop.last %}<span class="author-separator">, </span>{% endunless %}
              {% endfor %}

              {% if equal_contrib_authors != "" %}
                <div class="equal-contrib-note">
                  <small class="text-muted"><sup>*</sup> Equal contribution</small>
                </div>
              {% endif %}
            </div>

            <!-- Description -->
            <div class="project-description mb-2">
              <p class="text-muted">{{ project.description }}</p>
            </div>

            <!-- Year -->
            {% if project.year %}
              <div class="project-year mb-3">
                <span class="badge bg-secondary">{{ project.year }}</span>
              </div>
            {% endif %}

            <!-- Action Buttons -->
            <div class="project-buttons">
              {% if project.paper %}
                <a href="{{ project.paper }}" target="_blank" class="btn btn-sm btn-outline-primary project-btn">
                  <i class="fas fa-file-pdf"></i> Paper
                </a>
              {% endif %}

              {% if project.code %}
                <a href="{{ project.code }}" target="_blank" class="btn btn-sm btn-outline-success project-btn">
                  <i class="fab fa-github"></i> Code
                </a>
              {% endif %}

              {% if project.dataset %}
                <a href="{{ project.dataset }}" target="_blank" class="btn btn-sm btn-outline-info project-btn">
                  <i class="fas fa-database"></i> Dataset
                </a>
              {% endif %}

              {% if project.demo %}
                <a href="{{ project.demo }}" target="_blank" class="btn btn-sm btn-outline-purple project-btn">
                  <i class="fas fa-play-circle"></i> Demo
                </a>
              {% endif %}

              {% if project.blog %}
                <a href="{{ project.blog }}" target="_blank" class="btn btn-sm btn-outline-warning project-btn">
                  <i class="fas fa-blog"></i> Blog
                </a>
              {% endif %}

              {% if project.website %}
                <a href="{{ project.website }}" target="_blank" class="btn btn-sm btn-outline-secondary project-btn">
                  <i class="fas fa-globe"></i> Website
                </a>
              {% endif %}
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Image Modal -->
    <div class="modal fade" id="projectImageModal{{ forloop.index }}" tabindex="-1" aria-labelledby="projectImageModalLabel{{ forloop.index }}" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen-lg-down modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="projectImageModalLabel{{ forloop.index }}">{{ project.title }}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center">
            <img src="{{ project.image | relative_url }}" alt="{{ project.title }}" class="img-fluid">
          </div>
        </div>
      </div>
    </div>

    {% unless forloop.last %}<hr class="project-divider">{% endunless %}
  {% endfor %}
</div>